<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form action="">
        <p>nom</p>
        <input type="text" name="nom" id="nom">

        <p>adresse</p>
        <input type="text" name="adresse" id="adresse">

        <p>email</p>
        <input type="email" name="email" id="email">

        <p>sujet</p>
        <input type="text" name="sujet" id="sujet">
        
        <br><br><br>
        
        <label for="truc">Choix</label>
        <select name="truc " id="truc">
            <option value="Smart building">Smart building</option>
            <option value="Energy Management">Energy Management</option>
            <option value="Ontology">Ontology</option>
            <option value="Micro Grid">Micro Grid</option>
            <option value="Other">Other</option>
        </select>

        <div id="inputOther"></div>
        <div id="boutonOther"></div>


        <p id="random"></p>
        <p id="compteur"></p>
        <p id="affichage"></p>


        <!-- <p id="truc">Verifier</p> -->

        <input type="text" id="aVerif">

        <input type="button" value="Verifier" onclick="verif()">

        <br><br><br>

        <input type="button" value="Envoyer" onclick="envoyer()">

        <h1 id="erreur" style="color: red;"></h1>

    </form>

    <script>
        
        //teste si l'option sélectionné est "other" en temps réel si oui on affiche un input pour que l'utilisateur puisse écrire son choix
        var inputOther = document.getElementById("inputOther").innerHTML;
        document.getElementById("truc").addEventListener("change", function(){
            if(document.getElementById("truc").value == "Other"){
                document.getElementById("inputOther").innerHTML = "<input type='text' name='input' id='input'>";
                document.getElementById("boutonOther").innerHTML = "<input type='button' value='Valider' onclick='valider()'>";
            }
        });
        
        function valider(){
            var input = document.getElementById("input").value;
            //rajoue l'option dans la liste déroulante
            //si le texte de l'option commence pas par un chiffre
            if(input.match(/^[0-9]/)){
                alert("Le texte ne peut pas commencer par un chiffre");
            }
            else{
                document.getElementById("truc").innerHTML += "<option value='"+input+"'>"+input+"</option>";
            }
        }
            
        


        //1.Vérifier que Javascript est activé
        if(navigator.javaEnabled() == false){
            // document.location.href="https://google.com"; 
        }



        var compteur = 0;

        document.onload = document.getElementById("random").innerHTML = Math.floor(Math.random() * (99999 - 10000) + 10000);
        

        // document.getElementById("affichage").innerHTML = navigator.userAgent;

        

        //si l'utilisateur utilise pas google chrome on le redirige vers google.com
        // if(navigator.userAgent.indexOf("Chrome") == -1){ //fonctionne pas
        //     document.location.href="https://google.com"; 
        // }
        
        

        if(navigator.language != "fr-FR"){
            document.location.href="https://google.com"; 
        }

        function verif(){
            var aVerif = document.getElementById("aVerif").value;
            var random = document.getElementById("random").textContent;

            document.getElementById("compteur").innerHTML = compteur;

            if(aVerif == random){
                alert("Bravo");

            }
            else if(aVerif > random){
                alert("Trop grand");
                compteur +=1;
                if(compteur == 5){
                    document.location.href="https://google.com"; 
                }
            }
            else if(aVerif < random){
                alert("Trop petit");
                compteur +=1;
                if(compteur == 5){
                    document.location.href="https://google.com"; 
                }
            }

        }
        
        function envoyer(){
            
            var nom = document.getElementById("nom").value;
            var adresse = document.getElementById("adresse").value;
            var email = document.getElementById("email").value;
            var sujet = document.getElementById("sujet").value;

            if (nom == ""){
                document.getElementById("erreur").innerHTML = "Veuillez remplir le champ nom";
            }

            else if (adresse == ""){
                //si le champs contient un @ avec expressions régulières
                if(adresse.match(/@/)){
                    document.getElementById("erreur").innerHTML = "Veuillez remplir le champ adresse";
                }              
            }

            else if (email == ""){
                document.getElementById("erreur").innerHTML = "Veuillez remplir le champ email";
            }

            else if (sujet == ""){
                document.getElementById("erreur").innerHTML = "Veuillez remplir le champ sujet";
            }

            else{
                document.getElementById("erreur").innerHTML = "";
                alert("Votre message a bien été envoyé");
            }
        }


            // else if (adresse == ""){
            //     document.getElementById("erreur").innerHTML = "Veuillez remplir le champ adresse";
            // }

            // else if (email == ""){
            //     document.getElementById("erreur").innerHTML = "Veuillez remplir le champ email";
            // }

            // else if (sujet == ""){
            //     document.getElementById("erreur").innerHTML = "Veuillez remplir le champ sujet";
            // }

            // else if (truc == ""){
            //     document.getElementById("erreur").innerHTML = "Veuillez sélectionner un choix";
            // }
            // else{
            //     document.getElementById("erreur").innerHTML = "";
            //     alert("Votre message a bien été envoyé");
            
        //J'en suis a la question 4
        
    </script>

</body>
</html>
